# fedlens configuration

# Global settings
listen_addr = ":3000"
insecure_skip_verify = true
log_level = "debug"
# theme = "dark"                       # light, dark, or auto (default: auto)
# timezone = "Asia/Tokyo"              # IANA timezone for display (default: UTC)

# OIDC RP definitions (multiple allowed)
[[oidc]]
name = "Keycloak OIDC"
base_url = "http://oidc.example.com:3000"
issuer = "http://idp.example.com:8080/realms/fedlens"
client_id = "fedlens-oidc"
client_secret = "fedlens-oidc-secret"
redirect_uri = "http://oidc.example.com:3000/callback"
scopes = ["openid", "profile", "email"]
# pkce = true
# pkce_method = "S256"              # S256 or plain (default: S256)
# response_type = "code"            # code, token, id_token, etc.
# response_mode = ""                # query, fragment, form_post
# callback_path = "/callback"       # IdP redirect-back path (default: /callback)
# extra_auth_params = { prompt = "consent" }

# Path-based routing example (multiple apps on the same host):
# [[oidc]]
# name = "Entra ID"
# base_url = "http://localhost:3000/entra"
# issuer = "https://login.microsoftonline.com/xxx/v2.0"
# client_id = "yyy"
# client_secret = "zzz"
# redirect_uri = "http://localhost:3000/entra/callback"
# pkce = true
# extra_auth_params = { login_hint = "user@example.com" }

# OAuth2 Client definitions (multiple allowed)
[[oauth2]]
name = "Keycloak OAuth2"
base_url = "http://oauth2.example.com:3000"
authorization_url = "http://idp.example.com:8080/realms/fedlens/protocol/openid-connect/auth"
token_url = "http://idp.example.com:8080/realms/fedlens/protocol/openid-connect/token"
introspection_url = "http://idp.example.com:8080/realms/fedlens/protocol/openid-connect/token/introspect"
revocation_url = "http://idp.example.com:8080/realms/fedlens/protocol/openid-connect/revoke"
client_id = "fedlens-oauth2"
client_secret = "fedlens-oauth2-secret"
redirect_uri = "http://oauth2.example.com:3000/callback"
scopes = ["profile", "email"]

# With RFC 8414 Discovery:
# [[oauth2]]
# name = "Keycloak OAuth2 (Discovery)"
# base_url = "http://oauth2.example.com:3000"
# issuer = "http://idp.example.com:8080/realms/fedlens"
# client_id = "fedlens-oauth2"
# client_secret = "fedlens-oauth2-secret"
# redirect_uri = "http://oauth2.example.com:3000/callback"
# scopes = ["profile", "email"]

# GitHub OAuth (no Discovery, no Introspection):
# [[oauth2]]
# name = "GitHub OAuth"
# base_url = "http://github-oauth.example.com:3000"
# authorization_url = "https://github.com/login/oauth/authorize"
# token_url = "https://github.com/login/oauth/access_token"
# client_id = "your-github-client-id"
# client_secret = "your-github-client-secret"
# redirect_uri = "http://github-oauth.example.com:3000/callback"
# scopes = ["read:user", "user:email"]

# SAML SP definitions (multiple allowed)
[[saml]]
name = "Keycloak SAML"
base_url = "http://saml.example.com:3000"
idp_metadata_url = "http://idp.example.com:8080/realms/fedlens/protocol/saml/descriptor"
entity_id = "http://saml.example.com:3000/saml/metadata"
root_url = "http://saml.example.com:3000"
# acs_path = "/saml/acs"            # Assertion Consumer Service path (default: /saml/acs)
# slo_path = "/saml/slo"            # Single Logout path (default: /saml/slo)
# metadata_path = "/saml/metadata"  # SP Metadata path (default: /saml/metadata)
# cert_path = "/path/to/cert.pem"   # omit for auto-generated self-signed cert
# key_path = "/path/to/key.pem"
# allow_idp_initiated = true       # Allow IdP-Initiated SSO (default: false)

# Path-based routing example:
# [[saml]]
# name = "Okta SAML"
# base_url = "http://localhost:3000/okta-saml"
# idp_metadata_url = "https://okta.example.com/app/xxx/sso/saml/metadata"
# entity_id = "http://localhost:3000/okta-saml/saml/metadata"
# root_url = "http://localhost:3000/okta-saml"
